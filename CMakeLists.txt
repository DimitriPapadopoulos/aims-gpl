cmake_minimum_required( VERSION 2.6 )
find_package( brainvisa-cmake REQUIRED )
BRAINVISA_PROJECT()

BRAINVISA_FIND_PACKAGE( aims-free REQUIRED )
find_package( Qt REQUIRED )
find_package( QtVersion REQUIRED )
find_package( Doxygen )

BRAINVISA_DEPENDENCY( DEV DEPENDS "${BRAINVISA_PACKAGE_NAME}" RUN "= ${${BRAINVISA_PACKAGE_NAME}_VERSION}" )
BRAINVISA_DEPENDENCY( RUN DEPENDS aims-free RUN "= ${aims-free_VERSION}" )
BRAINVISA_DEPENDENCY( DEV DEPENDS aims-free DEV )
BRAINVISA_DEPENDENCY( RUN DEPENDS qt${DESIRED_QT_VERSION} RUN "= ${QT_VERSION}" )
math( EXPR result "${DESIRED_QT_VERSION} + 1" )
BRAINVISA_DEPENDENCY( DEV DEPENDS qt${DESIRED_QT_VERSION} DEV ">= ${DESIRED_QT_VERSION};<< ${result}" )

set( AIMS-GPL_DEFINITIONS ${AIMS_DEFINITIONS} ${QT_DEFINITIONS} )
add_definitions( ${AIMS-GPL_DEFINITIONS} )

set( AIMS-GPL_INCLUDE_DIRS "${CMAKE_BINARY_DIR}/include" ${AIMS-FREE_INCLUDE_DIRS} "${QT_INCLUDE_DIR}" )
include_directories( ${AIMS-GPL_INCLUDE_DIRS} )

add_subdirectory( src )

BRAINVISA_CREATE_CMAKE_CONFIG_FILES()
