cmake_minimum_required( VERSION 2.6 )

set( SOMA_BUILD_ALL_FROM_SOURCES true )

find_package( soma-infra REQUIRED )

project( aims-gpl )


set( CPACK_PACKAGE_NAME "${PROJECT_NAME}" )
set( CPACK_PACKAGE_VENDOR "CEA - NeuroSpin" )
set( CPACK_PACKAGE_VERSION_MAJOR 4 )
set( CPACK_PACKAGE_VERSION_MINOR 0 )
set( CPACK_PACKAGE_VERSION_PATCH 0 )
set( CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}-linux-i686")
set( CPACK_PACKAGE_INSTALL_DIRECTORY "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}" )
# SET( CPACK_INSTALL_CMAKE_PROJECTS "${CMAKE_BINARY_DIR}" aims cartobase-devel toto )
set( ${PROJECT_NAME}_VERSION_MAJOR ${CPACK_PACKAGE_VERSION_MAJOR} )
set( ${PROJECT_NAME}_VERSION_MINOR ${CPACK_PACKAGE_VERSION_MINOR} )
set( ${PROJECT_NAME}_VERSION_PATCH ${CPACK_PACKAGE_VERSION_PATCH} )
set( ${PROJECT_NAME}_VERSION ${${PROJECT_NAME}_VERSION_MAJOR}.${${PROJECT_NAME}_VERSION_MINOR}.${${PROJECT_NAME}_VERSION_PATCH} )

include( CPack )

SOMA_CREATE_MAIN_COMPONENTS()

find_package( aims REQUIRED )

find_package( Qt3 REQUIRED )
find_package( Doxygen )

set( AIMS-GPL_DEFINITIONS ${AIMS_DEFINITIONS} ${QT_DEFINITIONS} )
add_definitions( ${AIMS-GPL_DEFINITIONS} )

set( AIMS-GPL_INCLUDE_DIRS "${CMAKE_BINARY_DIR}/include" ${AIMS_INCLUDE_DIRS} "${QT_INCLUDE_DIR}" )
include_directories( ${AIMS-GPL_INCLUDE_DIRS} )

set( CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin )
set( CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib )


add_subdirectory( src )

#TODO: SOMA_CREATE_CMAKE_CONFIG_FILES()
